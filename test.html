<!DOCTYPE html>
<html lang="en">

<head>

<style>
    
body { 
  font: 15px/1.3em 'Verdana';
}

th {
    font-size: 17px
}

#table_id_filter {
    font-size: 17px;
    margin-bottom: 20px
}

input[type=search] {
    height: 25px;
}


h2 {
    font-weight: light;
}

h2 {
    font-size: 16px;
}

h3 {
    font-size: 15px;
    
    
}

a {
 text-decoration: none;
}
li {
 list-style: none;
 display: inline;
}

.navbar {
padding-top: 5px;
padding-bottom: 10px;
 color: #fff;
 text-align: center;
}


.nav-links a {
 color: black;
 text-align: center
}
/* LOGO */
.logo {
 font-size: 32px;
}
/* NAVBAR MENU */
.menu {
 gap: 1em;
 font-size: 20px;
}
.menu li:hover {
 background-color: lightgrey;
 border-radius: 5px;
 transition: 0.3s ease;
}
.menu li {
 padding: 5px 14px;
 display:inline-block;
 background-color: #ECECEC;
}

#extra {
  position: absolute;
  top: 55%;
  left: 25%;
  width: 50%;
  height: 30%;
  padding: 16px;
  border: 2px solid black;
  background-color: white;
  z-index: 1002;
  overflow: auto;
}

#new_data {
    text-align: left
}

</style>
    <meta charset="utf-8">
<!--     <meta content="width=device-width, initial-scale=1" name="viewport">  -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Mini Buleku</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css">
    

</head>

<body>
    <img style="display: block; margin-left: auto; margin-right: auto" src="data/Image/title.png"></img>
    <nav class="navbar">
        
        <!-- LOGO -->
        <!-- NAVIGATION MENU -->
        <ul class="nav-links">
          <!-- NAVIGATION MENUS -->
          <div class="menu">
            <li><a href="/">Home 主頁</a></li>
            <li><a href="/bio">About 關於</a></li>
            <li><a href="/ipa">Inventory 語音</a></li>
            <li><a href="/conjugate">Conjugator 動詞變化</a></li>
            <li><a href="/video">Videos 影片</a></li>
          </div>
        </ul>
      </nav>

      
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.2.1/js/bootstrap.bundle.min.js"></script> -->
    <!-- <script src="js/jquery.csv.min.js"></script> -->
    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <!-- <script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script> -->
    <!-- <script src="js/csv_to_html_table.js"></script> -->

    <!-- <script>
        $('<img src="data/Image/load.gif" class="loading" style="position: fixed"></img><br><br>').appendTo('body');
 
    </script> -->
    <script>


        $(document).ready( function () {
            $('#table_id').DataTable( {
                data: [
    {
        "enum": 2,
        "espoken": "aba",
        "eipa": "aba",
        "ewritten": "aba",
        "escript": "ᠠᠪᠠ",
        "eman": "打围",
        "eeng": "hunt, roundup hunt",
        "econj": "!!!",
        "s1num": 2,
        "s1spoken": "cimar bo aba sarem genem",
        "s1written": "cimari be aba sarame genembi",
        "s1man": "明天我们去围猎",
        "s1eng": "!!!",
        "s2num": "!!!",
        "s2spoken": "!!!",
        "s2written": "!!!",
        "s2man": "!!!"
    },
    {
        "enum": 3,
        "espoken": "acem",
        "eipa": "aʈʂɯm",
        "ewritten": "acimbi",
        "escript": "ᠠᠴᡳᠮᠪᡳ",
        "eman": "驮带",
        "eeng": "to pack, to load",
        "econj": "aci, acire, aciha, acime, acifi, acici, acicibe, acitala, acinggala, aciki, acikini, acicina, acirahv",
        "s1num": 33,
        "s1spoken": "bi sinm feVujend acemaq genky",
        "s1written": "bi simbe fehujen de acimanggi geneki",
        "s1man": "我用自行车托你去",
        "s1eng": "!!!",
        "s2num": "!!!",
        "s2spoken": "!!!",
        "s2written": "!!!",
        "s2man": "!!!"
    },
    {
        "enum": 4,
        "espoken": "acem",
        "eipa": "aʈʂɯm",
        "ewritten": "acambi",
        "escript": "ᠠᠴᠠᠮᠪᡳ",
        "eman": "合",
        "eeng": "to meet, to join",
        "econj": "aca, acara, acaha, acame, acafi, acaci, acacibe, acatala, acanggala, acaki, acakini, acacina, acarahv",
        "s1num": 24,
        "s1spoken": "si tered acem genE",
        "s1written": "si tere de acame gene",
        "s1man": "你去和他回合",
        "s1eng": "!!!",
        "s2num": "!!!",
        "s2spoken": "!!!",
        "s2written": "!!!",
        "s2man": "!!!"
    },
    {
        "enum": 5,
        "espoken": "acenem",
        "eipa": "aʈʂɯnɯm",
        "ewritten": "acanambi",
        "escript": "ᠠᠴᠠᠨᠠᠮᠪᡳ",
        "eman": "对",
        "eeng": "to match; to fit; to suit",
        "econj": "acana, acanara, acanaha, acaname, acanafi, acanaci, acanacibe, acanatala, acananggala, acanaki, acanakini, acanacina, acanarahv",
        "s1num": 27,
        "s1spoken": "min arVeN acenVei na?",
        "s1written": "mini arahangge acanahabio?",
        "s1man": "我写的对吗？",
        "s1eng": "(placeholder)",
        "s2num": 28,
        "s2spoken": "si tered aizilVeN acenVei",
        "s2written": "si tere de aisilahangge acanahabi",
        "s2man": "你帮他是对的"
    }
],
    columns: [
                    {data: "enum", orderable: false},
                    {data: "espoken"},
                    {data: "eipa"},
                    {data: "ewritten"},
                    {data: "escript", orderable: false},
                    {data: "null", orderable: false, "render": function (data, type, row, meta) {
                        if (row.written != "") {
                        return "<input type='image' margin-left='auto' margin-right='auto' src='data/Image/0.png' onmouseover='this.src=\"data/Image/" + row.enum + ".png\"' id = " + row.enum + " onmouseleave='this.src=\"data/Image/0.png\"'>"
                    } else{
                        return ""
                    }}},
                    {data: "eman", orderable: false},
                    {data: "eeng", orderable: false},
                    {data: "econj"},
                    {data: "null", orderable: false, "render": function (data, type, row, meta) {
                        if (row.written != "") {
                        //                             return "<img src='data/Image/expand.png' onclick='show('" + row.s1num + "', '" + row.s1spoken + "', '" + row.s1written + "')'></img>"
                        return (`<img src='data/Image/expand.png' onclick = 'show("${row.espoken}", "${row.ewritten}", "${row.s1num}", "${row.s1spoken}", "${row.s1written}", "${row.s1man}")'>`)
                    } else {
                        return ""
                    }}}
                ],

                "columnDefs": [ {
                    "targets": 0,
                    "data": "entry",
                    "render": function (data, type, row, meta) {
                        return ("<img src='data/Image/play.png' loading = 'lazy' onload = 'player(" + data + ")' class = 'pic' id='" + data + "'value='" + data + "'>")
                    }}, {
                    "targets": 4,
                    "data": "scriptText",
                    "render": function (data, type, row, meta) {
                        return ("<p style='font-size:20px; writing-mode: vertical-rl; text-orientation: sideways'>" + data + "</p>")
                    }}, {
                        "targets": 8,
                        "visible": false,
                        "searchable": true}
                    // {
                    // "targets": 9,
                    // "data": "s1num",
                    // "render": function (data, type, row, meta) {
                    //     return ("<img src='data/Image/expand.png></img>")
                    // }},
                ],
                // "columnDefs": [{ orderable: false, targets: 0 }, { orderable: false, targets: 4}, { orderable: false, targets: 5}, { orderable: false, targets: 6}, { orderable: false, targets: 7}],

                "order": [[1, "asc"]],
                "paging": true,
                "scrollY": "700px",
                "lengthChange": false,
                "deferRender": true,
                "pageLength": 50,
                "search": {"smart": false},
                "language": {
                    "search": "Search/搜索:"
                }

            }
            );
        } );

        function onVisible(num, callback) {
            element = document.getElementById(num)
            new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                if(entry.intersectionRatio > 0) {
                    callback(num);
                    observer.disconnect();
                }
                });
            }).observe(element);
            }

        array = document.getElementsByClassName("pic")

        function show(espoken, ewritten, s1num, s1spoken, s1written, s1man) {
            // next steps (1) delete pop-up if already present, and (2) create table with function inputs
            if (document.getElementById("extra")) {
                document.getElementById('extra').remove()
            }
            var par = document.getElementById("x")
            const e = document.createElement("div")
            e.id = "extra"
            // e.style.top = "25%"
            // e.style.left = "25%"
            // var command = "document.getElementById('extra').style.display= none'"
            e.innerHTML = `<img id='mini' style="display: inline" src='data/Image/minimize.png' onclick = "document.getElementById('extra').remove()"></img><h3 style="font-size: 18px; padding-left: 12px; display: inline">${espoken}</h3>`
            const mini_table = document.createElement("table")
            e_w_audio_id = `e_w_${s1num}`
            s_s_audio_id = `s_s_${s1num}`
            s_w_audio_id = `s_w_${s1num}`
            mini_table.innerHTML = `
            <ul style='margin-top: -4px; text-align: left; font-size: 16px; list-style-type:disc; display:inline-block'>
                <li>• <u>Audio (Written)</u>: ${ewritten}</li>&nbsp<img style="position: relative; top:8px" src='data/Image/play.png' loading = 'lazy' onload = 'player("${e_w_audio_id}", 1)' class = 'pic' id='${e_w_audio_id}'value='${e_w_audio_id}'><br><br>
                <li><b>Example Sentence (例句)</b></li><br>
                <li>• <u>Spoken</u>: ${s1spoken}</li>&nbsp<img style="position: relative; top:8px" src='data/Image/play.png' loading = 'lazy' onload = 'player("${s_s_audio_id}", 1)' class = 'pic' id='${s_s_audio_id}'value='${s_s_audio_id}'><br>
                <li>• <u>Written</u>: ${s1written}</li>&nbsp<img style="position: relative; top:8px" src='data/Image/play.png' loading = 'lazy' onload = 'player("${s_w_audio_id}", 1)' class = 'pic' id='${s_w_audio_id}'value='${s_w_audio_id}'><br><br>
                <li>• <u>Mandarin</u>: ${s1man}</li>
            <ul>
            </div>`
            
            e.append(mini_table)
            par.append(e)
        }
       



        // function adder(entry) {
        //     // document.getElementById(entry).innerHTML = "<audio id =" + "a" + entry + " src = 'data/Audio/" + entry + ".wav'></audio>"
        //     // document.getElementById(entry).addEventListener("click", function(){
        //     //     document.getElementById("a_" + entry).play()
        //     //     document.getElementById(entry).style.borderRadius = "50%"
        //     //     document.getElementById(entry).style.border = "2px solid blue"
        //     //     setTimeout(unlight, 2500)
        //     //     function unlight() {
        //     //         document.getElementById(entry).style.borderRadius = "0"
        //     //         document.getElementById(entry).style.border = "0px"
        //     // }
        //     // })
        //     onVisible(entry, player)
        // }

        function player(entry, token=0) {
            console.log(entry)
            path = "data/Audio/"
            console.log(token)
            if (token) {
                path = path + "dict_extra/"
            }
            document.getElementById(entry).innerHTML = "<audio id =" + "a" + entry + " src = '" + path + entry + ".wav'></audio>"
            document.getElementById(entry).addEventListener("click", function playt(){
                document.getElementById("a" + entry).play()
                document.getElementById(entry).style.borderRadius = "50%"
                document.getElementById(entry).style.border = "2px solid blue"
                setTimeout(unlight, 2500)
                function unlight() {
                    document.getElementById(entry).style.borderRadius = "0"
                    document.getElementById(entry).style.border = "0px"
                }
                document.removeEventListener("click", playt)
            })
            }

    </script>

<div id="x" style="padding-left: 40px; padding-right: 40px">
    <table id="table_id" class="display">
        <thead>
            <tr>
                <th>Audio</th>
                <th>Spoken</th>
                <th>IPA</th>
                <th>Written</th>
                <th>Script (Text)</th>
                <th>Script (Image)</th>
                <th>Mandarin</th>
                <th>English</th>
                <th>Conjugation</th>
                <th>Other</th>
            </tr>
        </thead>
    </table>
</div>
<br>
<div style="padding-left: 40px">
    <h2>Jacob Aaron Kodner (柯雅各) | Developer</h2>
    <h3>Undergraduate | Department of Language Science</h3>
    <h3>University of California, Irvine</h3><br>
</div>
<div style="padding-left: 40px">
<h2>Meng Rong Lu (孟榮路) | Linguistic Correspondent</h2>
<h3>Sebsihiyan Amban, Manchu-Sibe Culture Center</h3>
<h3>Shenyang, China</h3><br>
</div>
<div style="padding-left: 40px">
<h2 style> So Wai Lun, Tony (蘇偉倫) | Editor</h2>
<h3>Hong Kong, China</h3>
</div>
<br>
<h4 style="padding-left:40px; font-size: 15px; font-weight: 200">Contact: minibuleku@gmail.com</h3><br>

</body>

</html>
